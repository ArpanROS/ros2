<?xml version="1.0"?>
<robot xmlns:xacro="http://www.ros.org/wiki/xacro" name="arm_robot" >
    
    <xacro:include filename="$(find robot_description)/urdf/gazebo_arm.xacro"/>
    <xacro:include filename="$(find robot_description)/urdf/arm_ros2_controll.xacro"/>


    <!--<xacro:property name="PI" value="3.14159"/>
    <xacro:property name="effort" value="30.0"/>
    <xacro:property name="velocity" value="10.0"/>-->

    <xacro:macro name="def_inertia" params="mass">
        <inertial>
            <mass value="${mass}"/>
            <inertia ixx="1.0" ixy="0.0" ixz="0.0"
                      iyy="1.0" iyz="0.0"
                      izz="1.0"/>
        </inertial>
    </xacro:macro>

    <xacro:macro name="def_transmission" params="number">
        <transmission name="transmission_${number}">
            <plugin>transmissio_interface/SimpleTransmission</plugin>
            <actuator name="motor_${number}" role="actuator1"/>
            <joint name="joint_${number}" role="joint1">
                <mechanical_reduction>1.0</mechanical_reduction>
            </joint>

        </transmission>
    </xacro:macro>

    <link name="world"/>

    <link name="base_link">
        <xacro:def_inertia mass="1.0"/>
        <visual>
            <origin xyz="0 0 0" rpy="1.5707 0 0"/>
            <geometry>
               <mesh filename="package://robot_description/meshes/Base.stl" scale="0.01 0.01 0.01"/>
            </geometry>
        </visual>
        <collision>
            <origin xyz="0 0 0" rpy="1.5707 0 0"/>
            <geometry>
               <mesh filename="package://robot_description/meshes/Base.stl" scale="0.01 0.01 0.01"/>
            </geometry>
        </collision>
    </link>

    <joint name="base_joint" type="fixed">
        <parent link="world"/>
        <child link="base_link"/>
        <origin xyz="0 0 0" rpy="0 0 0"/>
    </joint>

    <link name="base_plate_link">
        <xacro:def_inertia mass="0.5"/>
        <visual>
            <origin xyz="0 0 0" rpy="1.5707 0 0"/>
            <geometry>
               <mesh filename="package://robot_description/meshes/Cover.stl" scale="0.01 0.01 0.01"/>
            </geometry>
        </visual>
        <collision>
            <origin xyz="0 0 0" rpy="1.5707 0 0"/>
            <geometry>
               <mesh filename="package://robot_description/meshes/Cover.stl" scale="0.01 0.01 0.01"/>
            </geometry>
        </collision>
    </link>

    <joint name="joint_1" type="revolute">
        <parent link="base_link"/>
        <child link="base_plate_link"/>
        <axis xyz="0 0 1"/>
        <origin xyz="0 0 0.45" rpy="0 0 0"/>
        <limit lower="-1.5707" upper="1.5707" effort="30.0" velocity="10.0"/>
    </joint>

    <link name="link_1">
        <xacro:def_inertia mass="0.5"/>
        <visual>
            <origin xyz="-0.05 0.11 0.16" rpy="0 1.5707 1.5707"/>
            <geometry>
               <mesh filename="package://robot_description/meshes/Link_1.stl" scale="0.01 0.01 0.01"/>
            </geometry>
        </visual>
        <collision>
            <origin xyz="-0.05 0.11 0.16" rpy="0 1.5707 1.5707"/>
            <geometry>
               <mesh filename="package://robot_description/meshes/Link_1.stl" scale="0.01 0.01 0.01"/>
            </geometry> 
        </collision>
    </link>

    <joint name="joint_2" type="revolute">
        <parent link="base_plate_link"/>
        <child link="link_1"/>
        <axis xyz="1 0 0"/>
        <origin xyz="-0.1 0.32 0.45" rpy="0 0 0"/>
        <limit lower="-1.5707" upper="1.5707" effort="30.0" velocity="10.0"/>
    </joint>

    <link name="link_2">
        <xacro:def_inertia mass="0.2"/>
        <visual>
            <origin xyz="0.06 0.124 -0.158" rpy="-1.5707 1.5707 -1.5707"/>
            <geometry>
               <mesh filename="package://robot_description/meshes/Link_2.stl" scale="0.01 0.01 0.01"/>
            </geometry>
        </visual>
        <collision>
            <origin xyz="0.06 0.124 -0.158" rpy="-1.5707 1.5707 -1.5707"/>
            <geometry>
               <mesh filename="package://robot_description/meshes/Link_2.stl" scale="0.01 0.01 0.01"/>
            </geometry>
        </collision>
    </link>

    <joint name="joint_3" type="revolute">
        <parent link="link_1"/>
        <child link="link_2"/>
        <axis xyz="1 0 0"/>
        <origin xyz="0.05 0 1.31" rpy="0 0 0"/>
        <limit lower="-1.5707" upper="1.5707" effort="30.0" velocity="10.0"/>
    </joint>

    <link name="link_3">
        <xacro:def_inertia mass="0.2"/>
        <visual>
            <origin xyz="0.18 0.07 0.19" rpy="-1.5707 1.5707 0"/>
            <geometry>
               <mesh filename="package://robot_description/meshes/Link_3.stl" scale="0.01 0.01 0.01"/>
            </geometry>
        </visual>
        <collision>
                <origin xyz="0.18 0.07 0.19" rpy="-1.5707 1.5707 0"/>
                <geometry>
                   <mesh filename="package://robot_description/meshes/Link_3.stl" scale="0.01 0.01 0.01"/>
                </geometry>
        </collision>
    </link>

    <joint name="joint_4" type="revolute">
        <parent link="link_2"/>
        <child link="link_3"/>
        <axis xyz="0 0 1"/>
        <origin xyz="0.155 -0.09 0.75" rpy="0 0 0"/>
        <limit lower="-1.5707" upper="1.5707" effort="30.0" velocity="10.0"/>
    </joint>

    <link name="link_4">
        <xacro:def_inertia mass="0.2"/>
        <visual>
            <origin xyz="0.17 0.13 0.5" rpy="0 0 0"/>
            <geometry>
               <mesh filename="package://robot_description/meshes/Link_4.stl" scale="0.01 0.01 0.01"/>
            </geometry>
        </visual>
        <collision>
            <origin xyz="0.17 0.13 0.5" rpy="0 0 0"/>
            <geometry>
               <mesh filename="package://robot_description/meshes/Link_4.stl" scale="0.01 0.01 0.01"/>
            </geometry>
        </collision>
    </link>

    <joint name="joint_5" type="revolute">
        <parent link="link_3"/>
        <child link="link_4"/>
        <axis xyz="1 0 0"/>
        <origin xyz="0.12 0.065 0.29" rpy="0 0 0"/>
        <limit lower="-1.5707" upper="1.5707" effort="30.0" velocity="10.0"/>
    </joint>

    <link name="link_5">
        <xacro:def_inertia mass="0.2"/>
        <visual>
            <origin xyz="0 0 0" rpy="0 -1.74533 0"/>
            <geometry>
               <mesh filename="package://robot_description/meshes/Grip_1.stl" scale="0.01 0.01 0.01"/>
            </geometry>
        </visual>
        <collision>
            <origin xyz="0 0 0" rpy="0 -1.74533 0"/>
            <geometry>
               <mesh filename="package://robot_description/meshes/Grip_1.stl" scale="0.01 0.01 0.01"/>
            </geometry>
        </collision>
    </link>

    <joint name="joint_6" type="revolute">
        <parent link="link_4"/>
        <child link="link_5"/>
        <axis xyz="0 1 0"/>
        <origin xyz="0.01 0.09 0.48" rpy="0 0 0"/>
        <limit lower="-1.5707" upper="0.0" effort="30.0" velocity="10.0"/>
    </joint>

    <link name="link_6">
        <xacro:def_inertia mass="0.2"/>
        <visual>
            <origin xyz="0 0 0" rpy="0 -1.48353 0"/>
            <geometry>
               <mesh filename="package://robot_description/meshes/Grip_2.stl" scale="0.01 0.01 0.01"/>
            </geometry>
        </visual>
        <collision>
            <origin xyz="0 0 0" rpy="0 -1.48353 0"/>
            <geometry>
               <mesh filename="package://robot_description/meshes/Grip_2.stl" scale="0.01 0.01 0.01"/>
            </geometry>
        </collision>
    </link>

    <joint name="joint_7" type="revolute">
        <parent link="link_4"/>
        <child link="link_6"/>
        <axis xyz="0 1 0"/>
        <origin xyz="0.32 0.09 0.48" rpy="0 0 0"/>
        <mimic joint="joint_6" multiplier="-1"/>
        <limit lower="0.0" upper="1.5707" effort="30.0" velocity="10.0"/>
    </joint>

    <link name="link_7">
        <xacro:def_inertia mass="0.05"/>
        <visual>
            <origin xyz="0 -0.01 0" rpy="0 -1.95 -3.14159"/>
            <geometry>
               <mesh filename="package://robot_description/meshes/Grip_3.stl" scale="0.01 0.01 0.01"/>
            </geometry>
        </visual>
        <collision>
            <origin xyz="0 -0.01 0" rpy="0 -1.95 -3.14159"/>
            <geometry>
               <mesh filename="package://robot_description/meshes/Grip_3.stl" scale="0.01 0.01 0.01"/>
            </geometry>
        </collision>
    </link>

    <joint name="joint_8" type="fixed">
        <parent link="link_5"/>
        <child link="link_7"/>
        <origin xyz="-0.01 0 0.31" rpy="0 0 0"/>
    </joint>

    <link name="link_8">
        <xacro:def_inertia mass="0.05"/>
        <visual>
            <origin xyz="0 -0.04 0" rpy="0 -1.989 0"/>
            <geometry>
               <mesh filename="package://robot_description/meshes/Grip_3.stl" scale="0.01 0.01 0.01"/>
            </geometry>
        </visual>
        <collision>
            <origin xyz="0 -0.04 0" rpy="0 -1.989 0"/>
            <geometry>
               <mesh filename="package://robot_description/meshes/Grip_3.stl" scale="0.01 0.01 0.01"/>
            </geometry>
        </collision>
    </link>

    <joint name="joint_9" type="fixed">
        <parent link="link_6"/>
        <child link="link_8"/>
        <origin xyz="0.03 0 0.31" rpy="0 0 0"/>
    </joint>


    <xacro:def_transmission number="1"/>
    <xacro:def_transmission number="2"/>
    <xacro:def_transmission number="3"/>
    <xacro:def_transmission number="4"/>
    <xacro:def_transmission number="5"/>
    <xacro:def_transmission number="6"/>
    <xacro:def_transmission number="7"/>

</robot>